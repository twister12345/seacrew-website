<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MOBX CREWING</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f4;
    }
    header {
      background-color: #003366;
      color: white;
      padding: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    header h1 {
      margin: 0;
      font-size: 24px;
    }
    .language-auth {
      display: flex;
      align-items: center;
      gap: 20px;
    }
    .language-auth img {
      height: 24px;
      cursor: pointer;
    }
    .language-auth button {
      padding: 6px 12px;
      cursor: pointer;
    }
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6);
      z-index: 1000;
    }
    .modal-content {
      background: white;
      padding: 30px;
      max-width: 400px;
      margin: 10% auto;
      border-radius: 8px;
      position: relative;
    }
    .modal-content h2 {
      margin-top: 0;
    }
    .modal-content input {
      width: 100%;
      padding: 8px;
      margin-bottom: 10px;
    }
    .modal-content button {
      padding: 8px 16px;
      margin-top: 10px;
    }
    #user-info {
      padding: 10px;
      text-align: right;
      background-color: #e0e0e0;
    }
    .content {
      padding: 30px;
      max-width: 900px;
      margin: auto;
    }
    .content h2 {
      color: #003366;
    }
    .content p {
      line-height: 1.6;
    }
  </style>
</head>
<body>
  <header>
    <h1>⚓ MOBX CREWING</h1>
    <div class="language-auth">
      <div>
        <img src="https://flagcdn.com/w40/me.png" alt="CG" title="Crnogorski">
        <img src="https://flagcdn.com/w40/gb.png" alt="EN" title="English">
      </div>
      <div>
        <button onclick="openModal('loginModal')">Login</button>
        <button onclick="openModal('signupModal')">Sign up</button>
        <button onclick="logoutUser()">Logout</button>
      </div>
    </div>
  </header>

  <div id="user-info"></div>

  <div class="content">
    <h2>Welcome to MOBX Crewing Agency</h2>
    <p>
      MOBX Crewing is a professional maritime recruitment and crew management company dedicated to connecting highly qualified seafarers with global ship owners and operators. Our goal is to ensure optimal crew performance, safety, and satisfaction by providing reliable and skilled maritime personnel.
    </p>
    <h3>Our Services</h3>
    <ul>
      <li>Recruitment of Officers and Ratings for all vessel types</li>
      <li>Pre-employment screening, certification checks, and interviews</li>
      <li>Crew planning and scheduling</li>
      <li>Travel and documentation support</li>
      <li>Training and development support</li>
    </ul>
    <h3>Why Choose MOBX?</h3>
    <ul>
      <li>Extensive database of certified and experienced crew</li>
      <li>Compliance with MLC 2006 and STCW standards</li>
      <li>Personalized client approach and fast response times</li>
      <li>Focus on safety, retention, and long-term partnerships</li>
    </ul>
    <p>
      Whether you’re a shipowner seeking reliable crew or a seafarer looking for your next contract, MOBX Crewing is your trusted maritime HR partner.
    </p>
  </div>

  <!-- LOGIN MODAL -->
  <div id="loginModal" class="modal">
    <div class="modal-content">
      <h2>Login</h2>
      <input type="email" id="loginEmail" placeholder="Email">
      <input type="password" id="loginPassword" placeholder="Password">
      <button onclick="loginUser()">Login</button>
      <button onclick="closeModal('loginModal')" style="float:right;">Close</button>
    </div>
  </div>

  <!-- SIGNUP MODAL -->
  <div id="signupModal" class="modal">
    <div class="modal-content">
      <h2>Sign Up</h2>
      <input type="text" id="signupName" placeholder="Full Name">
      <input type="email" id="signupEmail" placeholder="Email">
      <input type="password" id="signupPassword" placeholder="Password">
      <button onclick="signUpUser()">Sign Up</button>
      <button onclick="closeModal('signupModal')" style="float:right;">Close</button>
      <p id="verify-msg" style="margin-top:10px;"></p>
    </div>
  </div>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDBCwn0gpqIfxGFhjgPyp4djv34N4rpMyI",
      authDomain: "mobx-auth-77004.firebaseapp.com",
      projectId: "mobx-auth-77004",
      storageBucket: "mobx-auth-77004.appspot.com",
      messagingSenderId: "155941750383",
      appId: "1:155941750383:web:3a5341bad5ebd91aff2f9a",
      measurementId: "G-0BJ503BRT6"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    function openModal(id) {
      document.getElementById(id).style.display = 'block';
    }

    function closeModal(id) {
      document.getElementById(id).style.display = 'none';
    }

    function signUpUser() {
      const name = document.getElementById('signupName').value;
      const email = document.getElementById('signupEmail').value;
      const password = document.getElementById('signupPassword').value;

      auth.createUserWithEmailAndPassword(email, password)
        .then((userCredential) => {
          const user = userCredential.user;
          user.sendEmailVerification();
          db.collection('users').doc(user.uid).set({
            fullName: name,
            email: email,
            createdAt: new Date()
          });
          document.getElementById('verify-msg').innerText = 'Verification email sent!';
          document.getElementById('verify-msg').style.color = 'green';
        })
        .catch((error) => {
          alert(error.message);
        });
    }

    function loginUser() {
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;

      auth.signInWithEmailAndPassword(email, password)
        .then((userCredential) => {
          const user = userCredential.user;
          if (user.emailVerified) {
            document.getElementById('user-info').innerText = `Welcome, ${user.email}`;
            closeModal('loginModal');
          } else {
            alert('Please verify your email before logging in.');
          }
        })
        .catch((error) => {
          alert(error.message);
        });
    }

    function logoutUser() {
      auth.signOut().then(() => {
        document.getElementById('user-info').innerText = '';
        alert('You have been logged out.');
      });
    }
  </script>
</body>
</html>
